<Window x:Class="A1Note.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:A1Note"
        mc:Ignorable="d"
        Title="A1Note - Surface Pro 手写笔记" 
        Height="800" Width="1200"
        WindowStartupLocation="CenterScreen"
        Icon="Resources/app_icon.png">
    
    <Window.Resources>
        <Style TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="8,5"/>
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4"
                                BorderThickness="1"
                                BorderBrush="#40000000">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        
        <Style TargetType="TabItem">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TabItem">
                        <Border Name="Border" 
                                Background="{TemplateBinding Background}" 
                                BorderBrush="#40000000" 
                                BorderThickness="1,1,1,0"
                                CornerRadius="6,6,0,0"
                                Margin="2,0,2,0"
                                Padding="10,5">
                            <ContentPresenter x:Name="ContentSite"
                                            VerticalAlignment="Center"
                                            HorizontalAlignment="Center"
                                            ContentSource="Header"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    
    <Grid Name="MainGrid">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        
        <!-- 顶部工具栏 -->
        <Border Name="ToolbarPanel" Grid.Row="0" Padding="10">
            <StackPanel Orientation="Horizontal">
                <Button Click="NewPage_Click" ToolTip="新建页面">
                    <StackPanel Orientation="Horizontal">
                        <Image Source="Resources/new_page.png" Width="20" Height="20" Margin="0,0,5,0"/>
                        <TextBlock Text="新建页面" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>
                
                <Button Name="PenButton" Click="PenMode_Click" ToolTip="笔模式" Margin="20,0,0,0" Background="#FF6464FF">
                    <Image Source="Resources/pen.png" Width="24" Height="24"/>
                </Button>
                
                <Button Name="EraserButton" Click="EraserMode_Click" ToolTip="橡皮擦模式" Margin="5,0,0,0">
                    <Image Source="Resources/eraser.png" Width="24" Height="24"/>
                </Button>
                
                <Button Click="ClearPage_Click" ToolTip="清空当前页" Margin="20,0,0,0">
                    <Image Source="Resources/clear.png" Width="24" Height="24"/>
                </Button>
                
                <Button Click="Save_Click" ToolTip="保存" Margin="20,0,0,0">
                    <Image Source="Resources/save.png" Width="24" Height="24"/>
                </Button>
                
                <Button Name="ThemeButton" Click="ThemeToggle_Click" ToolTip="切换主题" Margin="20,0,0,0">
                    <Image Name="ThemeIcon" Source="Resources/moon.png" Width="24" Height="24"/>
                </Button>
                
                <Button Click="ExportPdf_Click" ToolTip="导出为PDF" Margin="20,0,0,0">
                    <Image Source="Resources/pdf_export.png" Width="24" Height="24"/>
                </Button>
                
                <Separator Margin="20,0,0,0" Width="2" Background="#40000000" Height="30"/>
                
                <Label Margin="10,0,0,0" VerticalAlignment="Center">笔刷:</Label>
                
                <!-- 笔刷预设 -->
                <Button Tag="0" Click="BrushPreset_Click" Margin="5,0,0,0" ToolTip="钢笔">
                    <Ellipse Width="24" Height="24" Fill="Black"/>
                </Button>
                
                <Button Tag="1" Click="BrushPreset_Click" Margin="5,0,0,0" ToolTip="马克笔">
                    <Ellipse Width="24" Height="24" Fill="#FF0078D7"/>
                </Button>
                
                <Button Tag="2" Click="BrushPreset_Click" Margin="5,0,0,0" ToolTip="荧光笔">
                    <Rectangle Width="30" Height="8" Fill="Yellow"/>
                </Button>
                
                <Button Tag="3" Click="BrushPreset_Click" Margin="5,0,0,0" ToolTip="铅笔">
                    <Ellipse Width="24" Height="24" Fill="Gray"/>
                </Button>
                
                <Button Tag="4" Click="BrushPreset_Click" Margin="5,0,0,0" ToolTip="红色标记">
                    <Ellipse Width="24" Height="24" Fill="Red"/>
                </Button>
                
                <Separator Margin="20,0,0,0" Width="2" Background="#40000000" Height="30"/>
                
                <Button Click="IncreaseBrushSize_Click" ToolTip="增大笔刷" Margin="10,0,0,0">
                    <Image Source="Resources/brush_plus.png" Width="24" Height="24"/>
                </Button>
                
                <Button Click="DecreaseBrushSize_Click" ToolTip="减小笔刷" Margin="5,0,0,0">
                    <Image Source="Resources/brush_minus.png" Width="24" Height="24"/>
                </Button>
                
                <StackPanel Orientation="Horizontal" Margin="20,0,0,0">
                    <Ellipse Name="BrushPreview" Width="24" Height="24" Fill="Black" 
                             VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <StackPanel>
                        <Label Name="BrushNameLabel" Content="钢笔" FontWeight="Bold" Padding="0"/>
                        <Label Name="BrushSizeLabel" Content="2pt" Padding="0"/>
                    </StackPanel>
                </StackPanel>
                
                <Label Name="StatusText" Content="就绪" Margin="20,0,0,0" VerticalAlignment="Center" 
                       FontStyle="Italic" Foreground="#606060" MinWidth="200"/>
            </StackPanel>
        </Border>
        
        <!-- 主内容区域 -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- 页面侧边栏 -->
            <Border Name="PagesPanel" Grid.Column="0" Width="180" BorderThickness="0,0,1,0" BorderBrush="#40000000">
                <StackPanel>
                    <Label Content="笔记本页面" FontWeight="Bold" Margin="10" HorizontalAlignment="Center"/>
                    
                    <TabControl Name="PagesTabControl" BorderThickness="0">
                        <TabItem Header="页面 1">
                            <InkCanvas Name="inkCanvas"/>
                        </TabItem>
                    </TabControl>
                    
                    <Label Name="CurrentBrushLabel" Content="当前: 钢笔" 
                           Margin="10" HorizontalAlignment="Center" FontWeight="Bold"/>
                </StackPanel>
            </Border>
            
            <!-- 绘图区域 -->
            <Grid Grid.Column="1">
                <InkCanvas Name="mainInkCanvas" Background="White"/>
            </Grid>
        </Grid>
    </Grid>
</Window>
